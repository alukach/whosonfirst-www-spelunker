<div class="row">
<div id="map"></div>
</div>

<div class="row">

<div class="col-md-7">

<ol class="list">
{% for doc in docs %}
<li class="loc" data-latitude="{{ doc['properties']['geom:latitude'] | e}}" data-longitude="{{ doc['properties']['geom:longitude'] | e}}">
  <a href="https://{{ request.host }}/id/{{ doc['properties']['wof:id'] |e }}/">{{ doc['properties']['wof:name'] |e }}</a>
  <code>{{ doc['properties']['wof:id'] |e }}</code>
  <small>
    &#8212;
    {% if doc['properties']['iso:country'] |e %}
    this is a <a href="/placetypes/{{ doc['properties']['wof:placetype'] |e }}/">{{ doc['properties']['wof:placetype'] |e }}</a> in <span class="hey-look">{{ doc['properties']['iso:country'] |e }}</span>
    {% else %}
    this is a <a href="/placetypes/{{ doc['properties']['wof:placetype'] |e }}/">{{ doc['properties']['wof:placetype'] |e }}</a>
    {% endif %}
  </small>
  {% if doc.properties.get('gn:population', None) %}
  <small>
    and its <span class="hey-look">population</span> is {{ doc.properties.get('gn:population') |number_format|e }}
  </small>
  {% endif %}
</li>
{% endfor %}
</ol>

</div>

<div class="col-md-5">

{% if facets %}
<h4>by placetype</h4>
<ul class="list-inline">
{% for f in facets['placetypes'] %}
<li><a href="{{ facet_url}}&placetype={{ f.key | e}}">{{ f.key | e }}</a> <small>{{ f.doc_count | e }}</small></li>
{% endfor %}
</ul>

<h4>by ISO</h4>
<ul class="list-inline">
{% for f in facets['countries'] %}
<li><a href="{{ facet_url}}&iso={{ f.key | e}}">{{ f.key.upper() | e }}</a> <small>{{ f.doc_count | e }}</small></li>
{% endfor %}
</ul>

<h4>by tag</h4>

<ul class="list-inline">
{% for f in facets['tags'] %}
<li><a href="{{ facet_url}}&tag={{ f.key | e}}">{{ f.key | e }}</a> <small>{{ f.doc_count | e }}</small></li>
{% endfor %}
</ul>

{% endif %}

</div>

</div>

<div class="row">
{% include "inc_pagination.html" %}
</div>

<script type="text/javascript">
  mapzen.whosonfirst.spelunker.draw_list('loc');
</script>
